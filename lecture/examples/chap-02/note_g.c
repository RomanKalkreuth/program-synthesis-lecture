/* ------------------------------------------------------------------------ */
/*  Adaption of Ada Lovelace's Note G in C                                  */
/*  Calculation of the 8th Bernoulli number                                 */
/*                                                                          */
/*  "Understand well as I may, my comprehension can only be an              */ 
/*  infinitesimal fraction of all I want to understand." - Ada Lovelace     */
/* ------------------------------------------------------------------------ */

#include <stdio.h>
#include <stdlib.h>

float note_g(void);

int main(void) {
    float b7 = note_g();
    printf("%f", b7);
}


float note_g(void) {

    /* --------------------------------------------------------------- */
    /* Data                                                            */
    /* --------------------------------------------------------------- */
    float V1, V2, V3;
    V1 = 1;
    V2 = 2;
    V3 = 4;

    /* ---------------------------------------------------------------- */
    /* Working Variables                                                */
    /* ---------------------------------------------------------------- */
    float V4, V5, V6, V7, V8, V9, V10, V11, V12, V13;
    V4 = V5 = V6 = V7 = V8 = V9 = V10 = V11 = V12 = V13 = 0;
    
    /* ----------------------------------------------------------------- */
    /* Result Variables                                                  */
    /* ----------------------------------------------------------------- */
    const float V21 = 1.0f / 6.0f;                                 /* B1 */
    const float V22 = -1.0f / 30.0f;                               /* B3 */
    const float V23 = 1.0f / 42.0f;                                /* B5 */
    float V24 = 0;                                                 /* B7 */         /* (to be calculated) */ 
    


    /* ----------------------------------------------------------------- */
    /* Code */
    /* ----------------------------------------------------------------- */


    /*    Line      Operation                               Statement of Results                                    Intermediate Result  */
    /* --------------------------------------------------------------------------------------------------------------------------------- */
        
        /* 01 */    V4 = V5 = V6 = V2 * V3;                 /* 2n */
        /* 02 */    V4 = V4 - V1;                           /* 2n - 1 */
        /* 03 */    V5 = V5 + V1;                           /* 2n + 1 */
        /* 04 */    V11 = V4 / V5;                          /* (2n - 1) / (2n + 1) - !Bugfix V5/V4 */
        /* 05 */    V11 = V11 / V2;                         /* (1 / 2) * ((2n - 1) / (2n + 1)) */
        /* 06 */    V13 = V13 - V11;                        /* -(1 / 2) * ((2n - 1) / (2n + 1)) = A0 */                   /* A0 */ 
        /* 07 */    V10 = V3 - V1;                          /* (n - 1) (= 3) */

        /* 08 */    V7 = V2 + V7;                           /* 2 + 0 */
        /* 09 */    V11 = V6 / V7;                          /* 2n / 2 = A1 */                                             /* A1 */
        /* 10 */    V12 = V21 * V11;                        /* B1 * (2n / 2) = B1 * A1  */                                /* B1A1 */  
        /* 11 */    V13 = V12 + V13;                        /* A0 + B1A1 */                                               /* A0 + B1A1 */
        /* 12 */    V10 = V10 - V1;                         /* (n - 2) (= 2) */
        
        do {
	    //V8 = 0; 
            do {
             /* 13; 17 */    V6 = V6 - V1;                  /* 2n - 1  */
             /* 14; 18 */    V7 = V1 + V7;                  /* 2 + 1 = 3*/
	     if ( (int) V7 % 2 == 1 ) {
                /* 15 */     V8 = V6 / V7;                  /* (2n - 1) / 3 */
                /* 16 */     V11 = V8 * V11;                /* 2n/2 * (2n - 1) / 3 */
             } else {
	        /* 19 */     V9 = V6 / V7;                  /* (2n - 2) / 4 */   
                /* 20 */     V11 = V9 * V11;                /* 2n/2 * (2n -1) / 3 * (2n-2) / 4 */                          /* A3 */
             }
	     //printf("%f %f %f\n", V8, V9, V11);
            } while(V9 > V8 | V9 == 0 );

             if (V10 > 1) {
                /* 21 */     V12 = V22 * V11;               /* B3 * 2n/2 * (2n - 1) / 3 * (2n - 2) / 4 */                  /* B3A3 */ 
	     }
             else {
                /* 21_2 */   V12 = V23 * V11;                                                                              /* B5A5 */ 
	     }

            /* 22 */    V13 = V12 + V13;                                                                                   /* A0 + B1A1 + B3A3 */
                                                                                                                           /* A0 + B1A1 + B3A3 + B5A5 */
            /* 23 */    V10 = V10 - V1;                     /* (n - 3) (= 1) */
        } while(V10 > 0);

        /* 24 */        V24 = V13 + V24;                                                                                   /* B7  */                      
        /* 25 */        V3 = V3 + V1;                       /* n + 1 = 4 + 1 = 5  */ 

        return V24;
}
